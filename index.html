<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>91官方网站</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        /* 基础样式 */
        #age-verification-modal,
        #video-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
        }

        .modal-content {
            background: #fff;
            padding: 24px;
            border-radius: 16px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.15);
        }

        /* 视频容器样式（通过JS动态添加类名控制） */
        .video-container {
            display: flex;
            justify-content: center;
            align-items: center;
            background: #000;
        }

        .video-iframe {
            border: 0;
            max-width: 100%;
            max-height: 100%;
            aspect-ratio: 16/9; /* 默认横屏比例 */
        }

        /* 移动端竖屏优化（通过JS添加.mobile类） */
        .mobile .video-iframe {
            aspect-ratio: 9/16; /* 竖屏9:16比例 */
        }

        /* 平板适配（可选，根据实际需求调整） */
        .tablet .video-iframe {
            max-width: 1024px;
            max-height: 768px;
        }
    </style>
</head>
<body>
    <!-- 年龄验证弹窗 -->
    <div id="age-verification-modal">
        <div class="modal-content">
            <p>您是否已满18岁？</p>
            <button id="yes-btn">是</button>
            <button id="no-btn">否</button>
        </div>
    </div>

    <!-- 视频容器 -->
    <div id="video-container" class="video-container" style="display: none;">
        <iframe class="video-iframe" src="//player.bilibili.com/player.html?isOutside=true&aid=80433022&bvid=BV1GJ411x7h7&cid=137649199&p=1" 
                scrolling="no" frameborder="no" allowfullscreen="true" allow="autoplay"></iframe>
    </div>

    <script>
        // ------------------------ UA 解析函数 ------------------------
        const device = {
            isMobile: false,
            isTablet: false,
            isPC: false,
            os: ''
        };

        function parseUA() {
            const ua = navigator.userAgent.toLowerCase();
            const isAndroid = ua.indexOf('android') > -1 && ua.indexOf('mobile') > -1; // 安卓手机
            const isiOS = /iphone|ipad|ipod/.test(ua); // iOS设备
            const isTablet = (isiOS && ua.indexOf('ipad') > -1) || (isAndroid && ua.indexOf('tablet') > -1); // 平板

            device.isMobile = (isiOS && !isTablet) || isAndroid && !isTablet;
            device.isTablet = isTablet;
            device.isPC = !device.isMobile && !device.isTablet;
            device.os = isiOS ? 'ios' : isAndroid ? 'android' : ua.indexOf('win') > -1 ? 'windows' : 'mac';

            // 添加设备类型类名到body
            document.body.className = device.isMobile ? 'mobile' : device.isTablet ? 'tablet' : 'pc';
        }

        // ------------------------ 布局更新函数 ------------------------
        function updateLayout() {
            const videoIframe = document.querySelector('.video-iframe');
            const isLandscape = window.innerWidth > window.innerHeight;
            
            // 根据设备类型调整基础比例
            if (device.isMobile) {
                videoIframe.style.aspectRatio = isLandscape ? '16/9' : '9/16'; // 手机横屏16:9，竖屏9:16
            } else {
                videoIframe.style.aspectRatio = '16/9'; // PC/平板默认16:9
            }

            // 限制最大尺寸（移动端适配）
            if (device.isMobile) {
                videoIframe.style.maxWidth = '90%'; // 手机视频宽度占屏幕90%
                videoIframe.style.maxHeight = isLandscape ? '90vh' : '90vh'; // 保持安全边距
            } else {
                videoIframe.style.maxWidth = '1280px'; // PC最大宽度
                videoIframe.style.maxHeight = '720px'; // 对应16:9
            }
        }

        // ------------------------ 事件监听 ------------------------
        function init() {
            parseUA(); // 解析UA
            window.addEventListener('resize', updateLayout); // 窗口变化
            window.addEventListener('orientationchange', updateLayout); // 设备旋转
            updateLayout(); // 初始化布局
        }

        // ------------------------ 按钮事件 ------------------------
        document.getElementById('yes-btn').addEventListener('click', () => {
            document.getElementById('age-verification-modal').style.display = 'none';
            document.getElementById('video-container').style.display = 'flex';
            init(); // 显示时重新初始化布局
        });

        document.getElementById('no-btn').addEventListener('click', () => {
            // 退出逻辑（示例：跳转至提示页）
            window.location.href = 'https://example.com/age-restricted';
        });

        // 初始化
        init();
    </script>
</body>
</html>
